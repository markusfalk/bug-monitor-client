/**!
  Bug Monitor Client
  @author: mail@markus-falk.com
  @url: https://github.com/markusfalk/bug-monitor-client/
  @license AGPL-3.0
*/
!function(e,n){"function"==typeof define&&define.amd?define(["dependency"],function(o){return e.returnExportsGlobal=n(o)}):"object"==typeof module&&module.exports?module.exports=n(require("dependency")):e.returnExportsGlobal=n(e.dependency)}(this,function(e){console.log(this,window,navigator);var n=window.bugMonitorClientConfigDefault,o=function(e,o){"info"===e&&n.verbose?console.info(o):"warn"===e&&n.verbose?console.warn(o):"error"===e&&console.error(o)},t=function(e,t){var r={};r.customFields=n.customFields,r.column=t.column,r.line=t.line,r.message=t.message,r.url=t.url,t.errorObject&&(r.stack=t.errorObject.stack),r.language=navigator.language,r.userAgent=navigator.userAgent,r.innerHeight=window.innerHeight,r.innerWidth=window.innerWidth;var i=new XMLHttpRequest;i.open(n.httpMethod,n.bugMonitorUrl,!0),i.timeout=n.timeout,i.setRequestHeader("Content-type","application/json"),i.onload=function(e){switch(e.currentTarget.status){case 404:o("warn","The bug-monitor-client could not find your back-end! ("+e.currentTarget.status+": "+e.currentTarget.statusText+")");break;case 200:o("info","The bug-monitor-client successfully reported an error to "+n.bugMonitorUrl)}},i.ontimeout=function(e){o("warn","The bug-monitor back-end timed out. "+e)},i.send(JSON.stringify(r))},r=function(){window.onerror=function(e,n,o,r,i){return!e.toLowerCase().indexOf("script error")>-1&&t(0,{message:e,url:n,line:o,column:r,errorObject:i}),!1}},i=function(){var e=!0;try{if(""===n.bugMonitorUrl)throw new Error("No url set for bug-monitor-client! Add bugMonitorUrl option to your setup: setBugMonitorClientConfigDefaultValue('bugMonitorUrl', 'http://your-url.com');")}catch(e){o("error",e)}return n.disabled&&(o("info","The bug-monitor-client script has been disabled on this page."),e=!1),e};return n={bugMonitorUrl:"",customFields:{},disabled:!1,httpMethod:"POST",timeout:2e3,verbose:!0},window.setBugMonitorClientConfigDefaultValue=function(e,o){n.hasOwnProperty(e)?n[e]=o:n.customFields[e]=o},document.addEventListener("DOMContentLoaded",function(){i()&&r()}),{}});